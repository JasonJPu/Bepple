char *ballBinary[] = {
  "00000000", "00001111", "11110000", "00000000",
  "00000000", "01110000", "00001110", "00000000",
  "00000001", "10000000", "00000001", "10000000",
  "00000010", "00000000", "00000000", "01000000",
  "00000100", "00000000", "00000000", "00100000",
  "00001000", "00000000", "00000000", "00010000",
  "00010000", "00000000", "00000000", "00001000",
  "00100000", "00000000", "00000000", "00000100",
  "00100000", "00000000", "00000000", "00000100",
  "01000000", "01111000", "00000000", "00000010",
  "01000000", "10000100", "00001110", "00000010",
  "01000001", "00000010", "00010001", "00000010",
  "10000010", "00000001", "00100000", "10000001",
  "10000100", "00000001", "01000000", "10000001",
  "10000100", "00000000", "10000000", "01000001",
  "10000100", "00000000", "10000000", "01000001",
  "10000100", "00000000", "10000000", "01000001",
  "10000100", "00000000", "10000000", "01000001",
  "10000100", "00000001", "01000000", "10000001",
  "10000010", "00000001", "00100000", "10000001",
  "01000001", "00000010", "00010001", "00000010",
  "01000000", "10000100", "00001110", "00000010",
  "01000000", "01111000", "00000000", "00000010",
  "00100000", "00000000", "00000000", "00000100",
  "00100000", "00000000", "00000000", "00000100",
  "00010000", "00000000", "00000000", "00001000",
  "00001000", "00000000", "00000000", "00010000",
  "00000100", "00000000", "00000000", "00100000",
  "00000010", "00000000", "00000000", "01000000",
  "00000001", "10000000", "00000001", "10000000",
  "00000000", "01110000", "00001110", "00000000",
  "00000000", "00001111", "11110000", "00000000"
};

char ballBitmap[32 * 4];

String text;
String phrases[] = {
  "42",
  "Harambe",
  "Try again",
  "Of course",
  "SE'XXI",
  "....",
  "It's a trap",
  "Never",
  "Feed me",
  "U mad?",
  "AAAAAHHHHHH",
  "Loading...",
  "@3@#$&(@",
  "Hello world",
  "Node.js",
  "Really?"
};

char printable[50];

void Magic8BallInit(){
  AccelInit();
  binaryToBitmap(ballBinary, ballBitmap, 32 * 4);
  text = "Ask away!";
  OrbitOledClearBuffer();
  OrbitOledMoveTo(0, 0);
  OrbitOledUpdate();
}


void Magic8BallUpdate(){
  accelUpdate();
  char buffer[10];
  if(isShaking(1500)){
    text = phrases[random(0, 16)];
  }
}

void Magic8BallUiUpdate(){
  OrbitOledClearBuffer();

  //Draw the ball
  OrbitOledMoveTo(0, 0);
  OrbitOledPutBmp(32, 32, ballBitmap);
  //Final line is invisible for some reason...
  for(int i = 0; i < 8; i++){
    OrbitOledMoveTo(12 + i, 31);
    OrbitOledDrawPixel();
  }

  OrbitOledMoveTo(40, 12);
  strcpy(printable, text.c_str());
  OrbitOledDrawString(printable);

  OrbitOledUpdate();
}

